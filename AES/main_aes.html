<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criptografia AES - Demo & Simulação</title>

    <link rel="icon" type="image/png" href="../../logo_azul.png">
    
    <script src="../CSS/tailwind_local.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="../CSS/inter_local.css">
    <link rel="stylesheet" href="../CSS/estilo_main.css">
    <link rel="stylesheet" href="../CSS/des_styles.css"> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
</head>
<body class="index-body">

    <div id="three-canvas"></div>

    <div class="navbar fixed top-0 left-0 right-0 z-20 shadow-lg navbar-transparent">
        <div class="navbar-content max-w-7xl mx-auto flex justify-between items-center py-4 px-6 relative z-10">
            <a href="../index.html" class="flex items-center space-x-2 text-2xl font-bold text-cyan-400 hover:text-cyan-300 transition">
                <img src="../logo_azul.png" alt="Logo" class="h-8 w-8">
                <span>CryptoInfo</span>
            </a>

            <button id="mobile-menu-toggle" class="p-2 rounded-md hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                <svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </div>
    </div>

    <div id="mobile-menu-drawer" class="mobile-menu-drawer transform transform-translate-x-full transition-transform duration-300 hidden">
        <h3 class="text-2xl font-bold mb-8 text-cyan-400 border-b border-slate-600 pb-2">Menu Principal</h3>

        <ul class="space-y-4 text-xl font-medium">
            <li><a href="../index.html" class="text-slate-200 hover:text-cyan-400 transition block py-2">Home</a></li>
            <li><a href="../Criptografia/criptografia.html" class="text-slate-200 hover:text-cyan-400 transition block py-2">Criptografia</a></li>
            
            <li class="pt-4"><span class="text-lg text-cyan-400 block border-t border-slate-600 pt-3 font-semibold">Cifras Simétricas</span></li>
            <li><a href="../DES/main_des.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Criptografia DES</a></li>
            <li><a href="main_aes.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Criptografia AES</a></li>
            <li><a href="../Vigenere/vigenere.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Cifra de Vigenère</a></li>
            
            <li class="pt-4"><span class="text-lg text-cyan-400 block border-t border-slate-600 pt-3 font-semibold">Criptografia de Chave Pública</span></li>
            <li><a href="../RSA/rsa.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Criptografia RSA</a></li>
            <li><a href="../ECC/ecc.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Criptografia ECC</a></li>
            <li><a href="../Extra/extra.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Diffie-Hellman (DHKE)</a></li>

            <li class="pt-4"><span class="text-lg text-cyan-400 block border-t border-slate-600 pt-3 font-semibold">Ferramentas de Integridade</span></li>
            <li><a href="../Hashing/hashing.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base">Funções Hash (SHA/MD5)</a></li>

            <li class="pt-4"><span class="text-lg text-cyan-400 block border-t border-slate-600 pt-3 font-semibold">Informações Adicionais</span></li>
            <li><a href="../SOBRE/sobre.html" class="text-slate-200 hover:text-cyan-400 transition block py-2 ml-4 text-base active">Sobre o Projeto</a></li>

        </ul>
    </div>

    <div id="mobile-menu-overlay" class="mobile-menu-overlay hidden opacity-0 transition-opacity duration-300" onclick="toggleMenu(false)"></div>

    
<section id="introducao" class="content-section-card max-w-7xl mx-auto mt-0">
    <h2>Introdução ao AES (Advanced Encryption Standard)</h2>
    <p class="text-slate-300 mb-4">
        O <strong class="text-cyan-400">AES</strong> (Advanced Encryption Standard) é a cifra de bloco simétrica mais utilizada no mundo, representando o padrão de fato para a maioria dos dados confidenciais. Seu desenvolvimento começou com o <strong class="text-cyan-300">Processo de Seleção AES do NIST</strong> (National Institute of Standards and Technology) no final dos anos 90, um concurso público e aberto que buscou substituir o DES (Data Encryption Standard), que se tornou vulnerável devido ao seu pequeno tamanho de chave (56 bits).
    </p>
    <p class="text-slate-300 mb-4">
        O algoritmo vencedor, o <strong class="text-green-300">Rijndael</strong>, criado pelos criptógrafos belgas <strong class="text-cyan-300">Joan Daemen e Vincent Rijmen</strong>, foi escolhido por sua combinação superior de velocidade, flexibilidade e segurança. Foi oficialmente adotado pelo governo dos EUA em 2001 (FIPS 197). O AES opera em <strong class="text-green-300">blocos fixos de 128 bits</strong>, um tamanho que oferece segurança de longo prazo.
    </p>

    <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700 mb-6">
        <h3 class="text-xl font-bold text-cyan-400 mb-2">Chave e Rodadas: O Aumento da Segurança</h3>
        <p class="text-slate-300 mb-2">
            A força do AES reside em sua flexibilidade de chave e no número correspondente de rodadas de transformação:
        </p>
        <ul class="list-disc list-inside space-y-1 text-slate-300">
            <li><strong class="text-yellow-300">AES-128:</strong> Utiliza uma chave de 128 bits e executa <span class="font-mono">10 rodadas</span>.</li>
            <li><strong class="text-yellow-300">AES-192:</strong> Utiliza uma chave de 192 bits e executa <span class="font-mono">12 rodadas</span>.</li>
            <li><strong class="text-yellow-300">AES-256:</strong> Utiliza uma chave de 256 bits e executa <span class="font-mono">14 rodadas</span>.</li>
        </ul>
        <p class="text-slate-300 mt-3 italic text-sm">
            Um ataque de força bruta a uma chave de 256 bits é considerado <strong class="text-red-300">computacionalmente inviável</strong> com a tecnologia atual.
        </p>
    </div>
    
    <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700 mb-6">
        <h3 class="text-xl font-bold text-cyan-400 mb-2">Estrutura e Operação: A Rede SPN e o Domínio Matemático</h3>
        <p class="text-slate-300">
            A arquitetura do AES é uma <strong class="text-red-300">Rede de Permutação e Substituição (SPN)</strong> pura. O bloco de 128 bits de entrada é tratado como uma matriz de <i>4 &times; 4</i> bytes, denominada <strong class="text-cyan-400">Estado</strong>.
        </p>
        <p class="text-slate-300 mt-2">
            O AES atinge seus objetivos de segurança, <strong class="text-green-300">Confusão</strong> (obtida por SubBytes) e <strong class="text-red-300">Difusão</strong> (obtida por ShiftRows e MixColumns), através de transformações que são reversíveis e realizadas sobre o <strong class="text-yellow-300">Corpo Finito GF(2^8)</strong> (Galois Field), uma base matemática essencial para garantir as propriedades criptográficas necessárias.
            
        </p>
    </div>
    <p class="text-slate-300 mb-6">
        A combinação da sua arquitetura SPN robusta com o Key Schedule eficiente e as longas chaves fazem do AES o <strong class="text-green-300">ideal</strong> para a maioria das aplicações de segurança, de comunicações sem fio (Wi-Fi) a protocolos de rede (TLS/SSL) e criptografia de disco.
    </p>
</section>

<hr class="border-slate-700 mt-12 mb-12">

<section id="operacoes-chave" class="content-section-card max-w-7xl mx-auto py-8">
    <h2>As 4 Transformações do AES (Rede SPN)</h2>
    <p class="text-slate-300 mb-6">
        Cada rodada do AES (exceto a última) aplica quatro transformações sequenciais no bloco de estado (<i>4 &times; 4</i> bytes) para garantir a <strong class="text-red-300">difusão</strong> e a <strong class="text-green-300">confusão</strong>.
    </p>

    <div class="space-y-6">
        
        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <h3 class="text-xl font-bold text-cyan-400 mb-3 flex items-center">
                <span class="text-2xl mr-3 text-cyan-500"></span> 1. SubBytes (Substituição de Bytes)
            </h3>
            <p class="text-slate-300">
                Esta é a camada de <strong class="text-green-300">confusão</strong>. Cada byte do estado é substituído por um byte correspondente em uma tabela de busca fixa (a <strong class="text-cyan-400">S-Box</strong>). Essa substituição é <strong class="text-green-300">não-linear</strong> e serve para obscurecer a relação entre o texto claro e o texto cifrado.
            </p>
        </div>

        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <h3 class="text-xl font-bold text-cyan-400 mb-3 flex items-center">
                <span class="text-2xl mr-3 text-cyan-500"></span> 2. ShiftRows (Deslocamento de Linhas)
            </h3>
            <p class="text-slate-300">
                Esta é a camada de <strong class="text-red-300">difusão</strong>. As linhas da matriz de estado são ciclicamente deslocadas para a esquerda em diferentes offsets. Isso garante que os bytes de uma coluna se <strong class="text-red-300">espalhem por colunas diferentes</strong> na próxima rodada.
            </p>
        </div>

        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <h3 class="text-xl font-bold text-cyan-400 mb-3 flex items-center">
                <span class="text-2xl mr-3 text-cyan-500"></span> 3. MixColumns (Mistura de Colunas)
            </h3>
            <p class="text-slate-300">
                Esta é a principal operação de <strong class="text-red-300">difusão</strong>. As colunas do estado são transformadas através de uma multiplicação matricial em um campo finito (<span class="font-mono text-yellow-300">GF(2^8)</span>). Isso garante que cada byte de saída dependa de <strong class="text-red-300">todos os quatro bytes de entrada</strong> da coluna. É omitida na última rodada.
            </p>
        </div>

        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <h3 class="text-xl font-bold text-cyan-400 mb-3 flex items-center">
                <span class="text-2xl mr-3 text-cyan-500"></span> 4. AddRoundKey (Adição da Chave de Rodada)
            </h3>
            <p class="text-slate-300">
                Esta é a única operação que usa a chave. O estado é combinado com a <strong class="text-cyan-400">Subchave de Rodada</strong> de 128 bits, usando a operação <strong class="text-green-300">XOR</strong>. A Subchave é gerada a partir da chave principal através do Key Schedule.
            </p>
        </div>
    </div>
</section>

<hr class="border-slate-700 mt-12 mb-12">



<section id="simulacao-aes" class="content-section-card max-w-7xl mx-auto py-8">
    <h2>AES Didático: Simulação da Rodada de Transformação</h2>
    <p class="text-slate-300 mb-6">
        O AES (Rijndael) é baseado em transformações de matrizes. Seu processo envolve várias rodadas, onde o bloco de dados de 128 bits é tratado como uma matriz de <i>4 &times; 4</i> bytes (o Estado) e passa pelas quatro transformações principais.
    </p>

    <p class="text-sm text-slate-400 mb-4 bg-slate-700 p-3 rounded-lg border border-cyan-500/50">
        <strong>Foco da Simulação:</strong> Demonstração visual de como o bloco de dados é processado em uma rodada simplificada do AES (após o SubBytes, ShiftRows, MixColumns e AddRoundKey).
    </p>

    <label for="msgInput" class="block mb-2 text-sm font-medium text-slate-200">Mensagem (Máx. 16 caracteres para um único bloco de 128 bits):</label>
    <input type="text" id="msgInput" value="CRIPTOAES128BITS" maxlength="16"
        class="w-full p-2 bg-slate-900 border border-slate-700 rounded-md text-slate-100 placeholder-slate-400 uppercase tracking-widest focus:ring-cyan-500 focus:border-cyan-500">

    <button id="iniciarBtn" class="button-with-shadow w-full mt-4 p-3 rounded-md font-bold transition duration-300 bg-cyan-600 hover:bg-cyan-500 text-slate-900 shadow-md">
        Executar Rodada 1 da Criptografia AES
    </button>

    <div id="stepsArea" class="mt-8 p-4 bg-slate-900 rounded-lg shadow-inner border border-cyan-500/50">
        <h3 class="text-xl font-bold text-cyan-400 mb-4">Saída da Simulação</h3>
        <p class="text-slate-400">Insira a mensagem acima e clique em 'Executar' para ver os passos de uma Rodada AES (Simulação Didática).</p>
    </div>
</section>

<hr class="border-slate-700 mt-12 mb-12">

<section id="demo-criptografia" class="content-section-card max-w-7xl mx-auto py-8">
    <h2>Teste a Criptografia AES (CryptoJS)</h2>
    <p class="text-slate-300 mb-6">
        Utilize esta seção para criptografar ou descriptografar textos usando a biblioteca <strong class="text-cyan-400">CryptoJS</strong>. O AES usa chaves de <strong class="text-green-300">128, 192 ou 256 bits</strong> (16, 24 ou 32 caracteres).
    </p>
    
    <div class="space-y-4">
        <div>
            <label for="entrada" class="block mb-2 text-sm font-medium text-slate-200">Texto de Entrada:</label>
            <textarea id="entrada" rows="3" class="w-full p-2 bg-slate-900 border border-slate-700 rounded-md text-slate-100 placeholder-slate-400 focus:ring-cyan-500 focus:border-cyan-500" placeholder="Digite a mensagem a ser criptografada/decriptografada."></textarea>
        </div>
        
        <div>
            <label for="chave" class="block mb-2 text-sm font-font-medium text-slate-200">Chave AES (16, 24 ou 32 caracteres - 128/192/256 bits):</label>
            <input type="text" id="chave" value="16caracterechave" maxlength="32" class="w-full p-2 bg-slate-900 border border-slate-700 rounded-md text-slate-100 focus:ring-cyan-500 focus:border-cyan-500">
        </div>

        <div class="grid grid-cols-2 gap-4 pt-2">
            <button onclick="criptografarAES()" class="button-with-shadow p-3 rounded-md font-bold transition duration-300 bg-cyan-600 hover:bg-cyan-500 text-slate-900 shadow-md">
                Criptografar (Encrypt)
            </button>
            <button onclick="decriptografarAES()" class="button-with-shadow p-3 rounded-md font-bold transition duration-300 bg-slate-700 hover:bg-slate-600 text-cyan-400 border border-cyan-400">
                Descriptografar (Decrypt)
            </button>
            <button onclick="limparCamposAES()" class="button-with-shadow p-3 rounded-md font-bold transition duration-300 bg-slate-800 hover:bg-slate-700 text-slate-300 border border-slate-600 col-span-2">
                Limpar Campos
            </button>
        </div>
        
        <div class="pt-4">
            <label class="block mb-2 text-sm font-medium text-slate-200">Saída (Ciphertext / Plaintext):</label>
            <div id="saida" class="w-full p-3 bg-slate-900 rounded-md h-24 overflow-y-auto border border-cyan-500/50 break-words text-green-300 font-mono">
                (a saída aparecerá aqui)
            </div>
            <button onclick="copiarSaida()" class="button-with-shadow w-full mt-2 bg-slate-800 hover:bg-slate-700 text-sm">
                Copiar Saída
            </button>
        </div>
    </div>
</section>

<footer class="des-page-footer">
    <p>© 2025 Projeto Cryptoinfo, para fins educacionais</p>
</footer>

    <div id="messageBox" class="fixed inset-0 bg-black bg-opacity-70 hidden justify-center items-center p-4" onclick="this.classList.add('hidden')">
        <div class="bg-slate-700 p-6 rounded-lg shadow-xl max-w-sm w-full" onclick="event.stopPropagation()">
            <h3 id="messageTitle" class="text-xl font-bold mb-3 text-cyan-400">Informação</h3>
            <p id="messageText" class="text-slate-200 mb-4"></p>
            <button onclick="document.getElementById('messageBox').classList.add('hidden')" class="w-full bg-cyan-400 text-slate-900 font-bold py-2 rounded-md hover:bg-cyan-300 transition">Fechar</button>
        </div>
    </div>


    <script>
        // FUNÇÕES ADAPTADAS PARA AES

        function criptografarAES() {
            const entrada = document.getElementById('entrada').value;
            const chave = document.getElementById('chave').value;
            const saida = document.getElementById('saida');
            if (!entrada || !chave) {
                saida.textContent = 'Erro: Campos de entrada e chave não podem estar vazios.';
                return;
            }
            try {
                // A chave AES deve ter 16, 24 ou 32 caracteres (128, 192 ou 256 bits)
                if (![16, 24, 32].includes(chave.length)) {
                    saida.textContent = 'Erro: A chave AES deve ter 16, 24 ou 32 caracteres.';
                    return;
                }
                // Usando CryptoJS.AES
                const ciphertext = CryptoJS.AES.encrypt(entrada, chave).toString();
                saida.textContent = ciphertext;
            } catch (error) {
                console.error("Erro durante a criptografia:", error);
                saida.textContent = 'Erro de Execução na Criptografia AES.';
            }
        }

        function decriptografarAES() {
            const entrada = document.getElementById('entrada').value; 
            const chave = document.getElementById('chave').value;
            const saida = document.getElementById('saida');

            if (!entrada || !chave) {
                saida.textContent = 'Erro: Campos de entrada e chave não podem estar vazios.';
                return;
            }

            try {
                // A chave AES deve ter 16, 24 ou 32 caracteres (128, 192 ou 256 bits)
                if (![16, 24, 32].includes(chave.length)) {
                    saida.textContent = 'Erro: A chave AES deve ter 16, 24 ou 32 caracteres.';
                    return;
                }
                // Usando CryptoJS.AES
                const bytes = CryptoJS.AES.decrypt(entrada, chave);
                const plaintext = bytes.toString(CryptoJS.enc.Utf8);
                
                if (plaintext === "") {
                    saida.textContent = 'Decriptografia falhou. Chave incorreta ou Ciphertext inválido.';
                } else {
                    saida.textContent = plaintext;
                }
            } catch (error) {
                console.error("Erro durante a decriptografia:", error);
                saida.textContent = 'Erro de Execução na Decriptografia AES.';
            }
        }

        function limparCamposAES() {
            document.getElementById('entrada').value = '';
            document.getElementById('chave').value = '16caracterechave'; // Valor padrão de 16 caracteres
            document.getElementById('saida').textContent = '(a saída aparecerá aqui)';
        }

        function copiarSaidaAES() {
            const saida = document.getElementById('saida').textContent;
            if (saida && saida !== '(a saída aparecerá aqui)') {
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = saida;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                try {
                    document.execCommand('copy');
                    alert('Saída copiada para a área de transferência!');
                } catch (err) {
                    console.error('Falha ao tentar copiar o texto:', err);
                }
                document.body.removeChild(tempTextArea);
            }
        }
        
        // Função de toggle menu principal (reutilizada)
        function toggleMenu(show) {
            const drawer = document.getElementById('mobile-menu-drawer');
            const overlay = document.getElementById('mobile-menu-overlay');
            
            // Determina o estado (se não for passado, inverte o estado atual)
            if (show === undefined) {
                show = drawer.classList.contains('transform-translate-x-full');
            }

            if (show) {
                // ABRIR
                // 1. Remove 'hidden' para tornar visível imediatamente
                drawer.classList.remove('hidden');
                overlay.classList.remove('hidden');
                
                // 2. Pequeno atraso (0ms) para garantir que a remoção do 'hidden' 
                //    ocorra antes de começar a transição de opacidade/posição
                setTimeout(() => {
                    drawer.classList.remove('transform-translate-x-full');
                    overlay.classList.remove('opacity-0');
                    overlay.classList.add('opacity-100');
                }, 10); // 10ms é suficiente
                
            } else {
                // FECHAR
                drawer.classList.add('transform-translate-x-full');
                overlay.classList.remove('opacity-100');
                overlay.classList.add('opacity-0');
                
                // Aguarda o fim da transição (300ms) antes de esconder o elemento
                setTimeout(() => {
                    overlay.classList.add('hidden');
                    drawer.classList.add('hidden');
                }, 300); 
            }
        }
        
        // Mantenha esta linha
        document.getElementById('mobile-menu-toggle').onclick = (e) => {
            e.stopPropagation(); // Impede que o clique suba para o overlay/body
            toggleMenu();
        };

        // Placeholder para o aviso (mantenha o restante do script aqui)
        function mostrarAviso(titulo) {
            document.getElementById('messageTitle').textContent = titulo;
            document.getElementById('messageText').textContent = 'Esta é uma seção de placeholder. O conteúdo será adicionado em breve.';
            document.getElementById('messageBox').classList.remove('hidden');
        }

    </script>
    
    <script src="../JS/aes_script.js"></script> 
    
    <script src="../JS/main.js"></script>
<script>
    // Função de toggle menu principal (CORRIGIDA)
    function toggleMenu(show) {
        const drawer = document.getElementById('mobile-menu-drawer');
        const overlay = document.getElementById('mobile-menu-overlay');
        
        // 1. Determina o estado atual ou o estado desejado
        // Verifica se o menu está fechado (contém a classe de transformação que o esconde)
        if (show === undefined) {
            show = drawer.classList.contains('transform-translate-x-full');
        }

        if (show) {
            // ABRIR
            // Remove 'hidden' para tornar visível
            drawer.classList.remove('hidden');
            overlay.classList.remove('hidden');
            
            // Pequeno atraso para garantir que a remoção do 'hidden' 
            // ocorra antes de começar a transição de opacidade/posição (fluxo de transição CSS)
            setTimeout(() => {
                drawer.classList.remove('transform-translate-x-full');
                overlay.classList.remove('opacity-0');
                overlay.classList.add('opacity-100');
            }, 10); 
            
        } else {
            // FECHAR
            drawer.classList.add('transform-translate-x-full');
            overlay.classList.remove('opacity-100');
            overlay.classList.add('opacity-0');
            
            // Aguarda o fim da transição (300ms) antes de esconder o elemento
            setTimeout(() => {
                overlay.classList.add('hidden');
                drawer.classList.add('hidden');
            }, 300); 
        }
    }
    
    // Associa o clique ao botão hambúrguer (mobile-menu-toggle)
    // O event.stopPropagation() é CRUCIAL para evitar que o clique "borbulhe"
    // e seja interpretado pelo overlay, fechando o menu imediatamente.
    document.getElementById('mobile-menu-toggle').onclick = (event) => {
        event.stopPropagation(); // IMPEDE A PROPAGAÇÃO DO CLIQUE
        toggleMenu();
    };

    // Função de placeholder para os itens do menu
    function mostrarAviso(titulo) {
        // Primeiro, feche o menu (se estiver aberto)
        toggleMenu(false); 
        
        // Em seguida, mostre o aviso
        document.getElementById('messageTitle').textContent = titulo;
        document.getElementById('messageText').textContent = 'Esta é uma seção de placeholder. O conteúdo será adicionado em breve.';
        document.getElementById('messageBox').classList.remove('hidden');
    }

</script>
</body>

</html>


